{"version":3,"sources":["util.js"],"names":["authEnabled","process","env","AUTH_ENABLED","AUTH_REQUIRED","checkEnvironment","log","warn","info","success","error","generateNonce","len"],"mappings":";;;;;;;;;AAAA;;AAEA;;AAEA,IAAIA,WAAW,GAAIC,OAAO,CAACC,GAAR,CAAYC,YAAZ,KAA6B,MAA7B,IAAuCF,OAAO,CAACC,GAAR,CAAYE,aAAZ,KAA8B,MAAxF;AAEA;;;;;AAIO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AACpC,MAAI,CAACL,WAAL,EAAkB;AAChBM,uBAAIC,IAAJ,CAAS,mBAAT;;AACAD,uBAAIE,IAAJ,CAAS,wDAAT;AACD,GAHD,MAGO;AACLF,uBAAIG,OAAJ,CAAY,mCAAZ;AACD,GANmC,CAQpC;;;AACA,MAAI,EAAE,sBAAsBR,OAAO,CAACC,GAAhC,CAAJ,EAA0C;AACxCI,uBAAII,KAAJ,CAAU,2EAAV;;AACAJ,uBAAII,KAAJ,CAAU,gDAAV;;AACAJ,uBAAII,KAAJ,CAAU,iDAAV;;AACAV,IAAAA,WAAW,GAAG,KAAd;AACD;;AAED,SAAOA,WAAP;AACD,CAjBM;AAmBP;;;;;;;;AAIO,IAAMW,aAAa,GAAG,SAAhBA,aAAgB;AAAA,MAACC,GAAD,uEAAO,EAAP;AAAA,mBAAiB,uBAAMA,GAAN,GAAjB;AAAA,CAAtB","sourcesContent":["import nonce from 'nonce';\n\nimport log from './logger';\n\nlet authEnabled = (process.env.AUTH_ENABLED === 'true' || process.env.AUTH_REQUIRED === 'true');\n\n/**\n * Ensure that environment variables are set up correctly\n * @return {boolean} Is auth enabled?\n */\nexport const checkEnvironment = () => {\n  if (!authEnabled) {\n    log.warn('Auth is disabled.');\n    log.info('Set AUTH_ENABLED to true in your environment variables');\n  } else {\n    log.success('Auth is enabled. Using PING flow.');\n  }\n\n  // check that all environment variables are present\n  if (!('OPENID_CLIENT_ID' in process.env)) {\n    log.error('You appear to be missing OPENID_CLIENT_ID from your environment variables');\n    log.error('The Ping auth flow will not work without this!');\n    log.error('Auth has been disabled due to misconfiguration.');\n    authEnabled = false;\n  }\n\n  return authEnabled;\n};\n\n/**\n * Generate a nonce of 15 chars\n * @return {string} nonce\n */\nexport const generateNonce = (len = 15) => `${nonce(len)()}`;\n"],"file":"util.js"}